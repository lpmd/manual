\appendix
%\chapter{Ap\'endice}

\chapter{The version history of lpmd}
\label{lpmd-versions}
This is the section of the last versions of lpmd. Always a detailed information
about the last version, updates, bugs and improvements, could be found in the
web page of the program \url{http://www.lpmd.cl}.

\begin{tabular}{ccl}\\
 Version 0.6.2 &:& Released December 1st 2011.\\
 && This is the las stable version, between the principal characteristics are\\
 && New lpmd-plotter, better ...\\
 Version 0.6.1 &:& Released January 3th 2010.\\
 && Version with many bugs correction associated to the previos one.\\
 Version 0.6.0 &:& Released June 12th 2009.\\
 &&\\
 Version 0.5.4 &:& Released January 1st 29th 2009.\\
 &&\\
 Version 0.5.3 &:& Released November 1st 2008.\\
 &&\\
 Version 0.5.2 &:& Released August 5th 2008.\\
 &&\\
 Version 0.5.1 &:& Released April 30th 2008.\\
 &&\\
 Version 0.5.0 &:& Released April 4th 2008.\\
 &&\\
 Version 0.4.0 &:& Released July 2007.\\
 &&\\
\end{tabular}

The graphic ... show the number of codelines (in different languages) from the
first to the last version of the code and the packages related to this.

\chapter{Plugins}
In this section you will found a list with all the different kind of plugins
availables in {\lpmd}, particullarly in the \texttt{lpmd-plugins} package. A
brief description of each plugin is added in each list. If you want see a more
deep description about the plugins and the utilities, please visit the website
\url{http://www.lpmd.cl/Plugins} or execute \verb|lpmd -p pluginname| in the
command line.

\section{Input/Output}
This plugins are designed to read and write different kind of files, in
particular files with atomic posititons and cell description.

\begin{table}[h!]\centering
 \begin{tabular}{|l|p{13cm}|}\hline
 Plugin & Description \\
 \hline\hline
 \texttt{dlpoly} & Read/Write of \texttt{HISTORY} and \texttt{CONFIG} file from
 the dl\_poly software.\\
 \hline
 \texttt{lpmd} & Particular format of {\lpmd}, Read/Write of \texttt{lpmd}
 and \text{zlp} files, support level, and tags.\\
 \hline
 \texttt{mol2} & Read/Write of \texttt{mol2} file types, basic support.\\
 \hline
  \texttt{pdb} & Read/Write of \texttt{pdb} file types, basic support.\\
 \hline
 \texttt{rawbinary} & Read/Write in binary mode. Used to save velocity and
 space.\\
 \hline
 \texttt{vasp} & Read of \textbf{POSCAR} file from vasp software.\\
 \hline
 \texttt{xyz} & Read/Write of \texttt{xyz} files, support level and other
 characteristics.\\
 \hline
\end{tabular}
\label{tab:modinout}
\caption{Table with input/output plugins in lpmd 0.6.2.}
\end{table}


\section{Cell Generators}
Plugins of {\lpmd} package that generate atomic crystal cell automatically.

\begin{table}[h!]\centering
 \begin{tabular}{|l|p{13cm}|}\hline
 Plugin & Description \\
 \hline\hline
 \texttt{crystal2d} & Generator of atomic cell in two dimensions.\\
 \hline
 \texttt{crystal3d} & Generator of atomic cell in three dimensions (fcc,
         bcc, etc.).\\
 \hline
 \texttt{skewstart} & Generate atomic cell using the  skewstart method,
 developed by \textit{K. Refson}, used generally in the \textbf{moldy}
 software.\\
 \hline
 \texttt{voronoi} & Nanostructures grains generator using the skewstart
 method.\\
 \hline
 \end{tabular}
\label{tab:cellgen}
\caption{Plugins to generate structures in lpmd 0.6.2.}
\end{table}

\section{Cell Managers}
This plugins determine the interaction way between the atoms of the simulation
cell.

\begin{table}[h!]\centering
 \begin{tabular}{|l|p{13cm}|}\hline
 Plugin & Description \\
 \hline\hline
 \texttt{lcbinary} & Plugin that control the atomic interaction list using ht
 \textit{LinkedCell} method with only one atom by cell.\\
 \hline
 \texttt{linkedcell} & Plugin that control the atomic interaction list using the
 \textit{Linked Cell} method.\\
 \hline
 \texttt{minimumimage} & Plugin that control the atomic interaction list using
the \textit{mimimum-image} method.\\
 \hline
 \texttt{verletlist} & Plugin that control the atomic interaction list using
the \textit{Verlet List} method.\\
 \hline
 \end{tabular}
\label{tab:modmanager}
\caption{Cell-Managers plugins, availables in lpmd 0.6.2.}
\end{table}

\section{Filters}
This plugin filter atoms on a simulation cell, are used to select atoms with
specific properties.

\begin{table}[h!]\centering
 \begin{tabular}{|l|p{13cm}|}\hline
 Plugin & Description \\
 \hline\hline
 \texttt{box} & Select atoms in a defined parallelepiped.\\
 \hline
 \texttt{cylinder} & Select atoms in a cylindrical region.\\
 \hline
 \texttt{element} & Select atoms by their atomic symbol.\\
 \hline
 \texttt{external} & Select atoms by some properties in a external file.\\
 \hline
 \texttt{index} & Select atom by the index number.\\
 \hline
 \texttt{random} & Select a group of random atoms.\\
 \hline
 \texttt{sphere} & Select atoms in a spherical region.\\
 \hline
 \texttt{tag} & Select atoms by their specific tag.\\
 \hline
 \end{tabular}
\label{tab:filtros}
\caption{Filter plugins availables in lpmd 0.6.2.}
\end{table}


\section{Modifiers}
The modifiers plugins are plugins that modify some properties in a simulation
cell, this can be properties on the cell or on the atoms inside the cell. Some
of this properties can be applied to in a specific group of atoms mixing this
plugins with apply and filters directions. For more information check the
examples avalables online or in the section~\ref{chap:examples}.

\begin{table}[h!]\centering
 \begin{tabular}{|l|p{13cm}|}\hline
 Plugin  & Description \\
 \hline\hline
 \texttt{addvelocity} & This add a certain velocity to the atoms.\\
 \hline
 \texttt{berendsen} & Scale the atoms temperature using the berensen
 thermostat.\\
 \hline
 \texttt{cellscaling} & Scale the axis of the cell.\\
 \hline
 \texttt{displace} & Displace the atoms in the cell.\\
 \hline
 \texttt{moleculecm} & Generate di-atomic molecules from bonding atoms.\\
 \hline
 \texttt{pinatom} & Fix the position of a specific atom(s), and preserve the
 displacement respect to this atom.\\
 \hline
 \texttt{propertycolor} & Set the atom colors by some property.\\
 \hline
 \texttt{quenchedmd} & Structural quenched method.\\
 \hline
 \texttt{randomatom*} & Delete/Select random atoms in the cell.\\
 \hline
 \texttt{replicate} & Replicate the original cell.\\
 \hline
 \texttt{rotate} & Rotate atoms.\\
 \hline
 \texttt{setcolor} & Set atom(s) color.\\
 \hline
 \texttt{settag} & Set atom(s) tag.\\
 \hline
 \texttt{setvelocity} & Set atom(s) velocity.\\
 \hline
 \texttt{shear} & Modify the cell vectors doing a shear procedure.\\
 \hline
 \texttt{temperature} & Set atom(s) temperature, using velocity scaling
 procedure.\\
 \hline
 \texttt{tempscaling} & Scale temperature procedure.\\
 \hline
 \texttt{undopbc} & Undo periodical boundary conditions.\\
 \hline
 \end{tabular}
\label{tab:modmodify}
\caption{Table with modifiers availables in {\lpmd} 0.6.2.}
\end{table}

\section{Instantaneous Properties}
This plugins are used to evaluate instantaneous properties over the simulation
cell. This properties can be calculated during the simulation or after
simulation doing a analysis with \texttt{lpmd-analyzer}. Some of these
properties listed below, are available to realize online, if you want you can
check this in the website \url{http://www.lpmd.cl}.

\begin{table}[h!]\centering
 \begin{tabular}{|l|p{13cm}|}\hline
 Plugin & Description \\
 \hline
 \texttt{angdist} & Evaluate the angular distribution function.\\
 \hline
 \texttt{angularmomentum} & Evaluate the angular momentum of the system.\\
 \hline
 \texttt{atomenergy} & Evaluathe the potential energy by atom.\\
 \hline
 \texttt{atomtrail} & Determine the atom trail of the atoms.\\
 \hline
 \texttt{centrosymmetry} & Determine the centro-symetry parameter. Phys. Rev. B
 58, 11085 (1998).\\
 \texttt{cna} & Determine the \textit{Common Neighbor Analysis} of the cell.\\
 \hline
 \texttt{cordnumfunc} & Evaluate the \textit{Coordination Number function} of
 the simulation cell.\\
 \hline
 \texttt{cordnum} & Evaluate the \textit{Coordination Number function} like an
 histogram of the simulation cell.\\
 \hline
 \texttt{densityprofile} & Generate a density profile of the simulation cell.\\
 \hline
 \texttt{gdr} & Evaluate the \textit{Pair Distribution Function}.\\
 \hline
 \texttt{localpressure} & Generate a profile of local pressures in the cell.\\
 \hline
 \texttt{overlap} & Locate overlap in the sample.\\
 \hline
 \texttt{pairdistances} & Generate a file with the pairdistances on the cell.\\
 \hline
 \texttt{rvcorr} & Determine the velocity correlation of the atoms.\\
 \hline
 \texttt{sitecoord} & Determine the coordination number by site.\\
 \hline
 \texttt{tempprofile} & Generate a temperature profile in the sample.\\
 \hline
 \texttt{veldist} & Velocities distribution in the cell.\\
 \hline
 \end{tabular}
\label{tab:modproper}
\caption{Table with instantaneous properties availables in lpmd 0.6.2.}
\end{table}

\section{Temporal properties}
This plugins are utilized to evaluate temporal properties of a previous
simulation. These properties \textbf{can not} be evaluated during a simulation,
these have to be evaluated after the simulation have finished. These can be
evaluated using the \verb|lpmd-analyzer| utility only.

\begin{table}[h!]\centering
 \begin{tabular}{|l|p{13cm}|}\hline
 Plugin & Description \\
 \hline
 \texttt{dispvol} & Evaluate the displaced volume of the atoms.\\
 \hline
 \texttt{mobility} & Evaluate the atomic mobility during the simulation.\\
 \hline
 \texttt{msd} & Evaluate the Mean square displacement.\\
 \hline
 \texttt{vacf} & Determine the velocity autocorrelation function.\\
 \hline
 \end{tabular}
\label{tab:modtempproper}
\caption{Temporal properties available in lpmd 0.6.2.}
\end{table}

\section{Integrators}
This plugins solve the movement equiation during a molecular dynamic simulation.

\begin{table}[h!]\centering
 \begin{tabular}{|l|p{13cm}|}\hline
 Plugin & Description \\
 \hline\hline
 \texttt{beeman} & Integrate the equations using the beeman method.\\
 \hline
 \texttt{euler} & Integrate the equations using the euler method.\\
 \hline
 \texttt{hardspheres} & Hard spheres method to move the atoms.\\
 \hline
 \texttt{leapfrog} & Leap frog method for integrate the equations.\\
 \hline
 \texttt{metropolis} & Metropolis technique, mostly used in structure
 relaxation.\\
 \hline
 \texttt{nosehoover} & Nose-Hoover method used for NPT ensemble.\\
 \hline
 \texttt{velocityverlet} & Integrate using the velocity-verlet method.\\
 \hline
 \texttt{verlet} & Integrate using the verlet method.\\
 \hline
 \end{tabular}
\label{tab:modinteg}
\caption{Integration plugins availables in lpmd 0.6.2.}
\end{table}

\section{Pair Potentials}
These plugins are the specialized in the atomic-pair interaction between the
atoms in a molecular dynamics simulation.

\begin{table}[h!]\centering
 \begin{tabular}{|l|p{10cm}|}\hline
 Plugin & Description \\
 \hline\hline
 \texttt{buckingham} & Buckingham potential.\\
 \hline
 \texttt{fastlj*} & Fast Lennard Jones Potential (tabulated). \\
 \hline
 \texttt{glj*} & Generalized Lennard Jones Potential. \\
 \hline
 \texttt{harmonic} & Harmonic potential.\\
 \hline
 \texttt{lennardjones} & Lennard-Jones typical potential.\\
 \hline
 \texttt{mcy} & MCY potential.\\
 \hline
 \texttt{morse} & Morse potential.\\
 \hline
 \texttt{simplebond} & Simple bond type potential.\\
 \hline
 \texttt{tabulatedpair} & Potential from a data-table.\\
 \hline
 \end{tabular}
\label{tab:modpotentials}
\caption{Interatomic pair potential for {\lpmd} 0.6.2.}
\end{table}

\section{Metallic Potentials}
These plugins are the specialized in the atomic-pair interaction between the
metallic atoms in a molecular dynamic simulation.

\begin{table}[h!]\centering
 \begin{tabular}{|l|p{13cm}|}\hline
 Plugin & Description \\
 \hline\hline
 \texttt{finnissinclair-ext} & Finnis-Sinclair extended potential.\\
 \hline
 \texttt{finnissinclair} & Finnis-Sinclair potential.\\
 \hline
 \texttt{gupta} & Gupta interatomic potential.\\
 \hline
 \texttt{suttonchen} & Sutton-Chen interatomic potential.\\
 \hline
 \end{tabular}
\label{tab:modmetalpotentials}
\caption{Table with metallic potentials in {\lpmd} 0.6.2.}
\end{table}


\section{Visualizers}
These plugins are used to visualize information of the cell, different way to
visualize can be used, for example just show in the standard output some
specific information (average, monitor, printatoms) or more sofisticated
visualization like 3D open-GL system (lpvisual).

\begin{table}[h!]\centering
 \begin{tabular}{|l|p{13cm}|}\hline
 Plugin & Description \\
 \hline\hline
 \texttt{average} & Visualize average properties from the simulation.\\
 \hline
 \texttt{lpvisual} & openGL visualization tool.\\
 \hline
 \texttt{monitor} & Visualize instantaneous properties from the simulation.\\
 \hline
 \texttt{printatoms} & Print atomic info over specific atom(s).\\
 \hline
 \end{tabular}
\label{tab:modgvisual}
\caption{Tabla con los m\'odulos visualizadores de lpmd.}
\end{table}


\chapter{API - liblpmd}
\label{ap:API}

La \textbf{API} (Ap. Programming Interface) es una herramienta de programaci\'on
que puede ser utilizada por cualquier usuario/programador que se vea beneficiado
por sus caracter\'isticas.


Consideramos que la mejor forma de comprender el funcionamiento de esta
\textbf{API}, es directamente con c\'odigos de ejemplo que pueden escribir los
desarrolladores. A continuaci\'on se muestran 3 ejemplos de utilizaci\'on de la
\textbf{API}, el primero se enmarca en un ``nano-programa'' de \textbf{DM}, el
segundo es la evaluaci\'on de una propiedad est\'atica de una celda del tipo
\texttt{.xyz} y la \'ultima una propiedad din\'amica de una celda.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Din\'amica Molecular B\'asica}
A continuaci\'on un c\'odigo que utilza todas las caracter\'isticas de la
\textbf{API}, para realizar din\'amica molecular.

\begin{verbatim}
 /*
 * Ejemplo simple de dinamica molecular usando el API de liblpmd
 */

#include <lpmd/api.h>
#include <iostream>

using namespace lpmd;

int main()
{
 MD md;            // define md como un objeto de dinamica molecular
 PluginManager pm; // define pm como un manejador de plugins

 SimulationCell cell(1, 1, 1, true, true, true); // cell es la celda de simulacion
 cell.SetVector(0, Vector(17.1191, 0.0, 0.0));   // define los vectores de la celda
 cell.SetVector(1, Vector(0.0, 17.1191, 0.0));
 cell.SetVector(2, Vector(0.0, 0.0, 17.1191));
 md.SetCell(cell);                    // asigna la celda de simulacion al objeto MD 

 // Carga de plugins con sus parametros
 pm.LoadPlugin("minimumimage", "");
 pm.LoadPlugin("crystalfcc", "symbol Ar nx 3 ny 3 nz 3");
 pm.LoadPlugin("lennardjones", "sigma 3.41 epsilon 0.0138");
 pm.LoadPlugin("velocityverlet", "dt 1.0");
 pm.LoadPlugin("temperature", "t 600.0");
 pm.LoadPlugin("energy", "");

 CellManager & cm = CastModule<CellManager>(pm["minimumimage"]);
 cell.SetCellManager(cm);            // asigna el manejador de celda

 CellGenerator & cg = CastModule<CellGenerator>(pm["crystalfcc"]);
 cg.Generate(cell);

 Potential & pot = CastModule<Potential>(pm["lennardjones"]);
 PotentialArray & potarray = md.GetPotentialArray();
 potarray.Set("Ar", "Ar", pot); // asigna lennardjones al arreglo de potenciales de MD

 Integrator & integ = CastModule<Integrator>(pm["velocityverlet"]);
 md.SetIntegrator(integ);

 InstantProperty & energ = CastModule<InstantProperty>(pm["energy"]);
 
 SystemModifier & therm = CastModule<SystemModifier>(pm["temperature"]);
 therm.Apply(cell);  // aplica el termalizador "temperature" a la celda de simulacion

 // Loop principal de la simulacion, hace 500 pasos
 md.Initialize(); 
 std::cout << "# Pasos   Temperatura" << '\n';
 for (long i=0;i<500;++i)
 {
  md.DoStep();                       // avanza el sistema un paso de simulacion
  energ.Evaluate(cell, pot);         // evalua las propiedades en el plugin energy
  double T;
  T = pm["energy"].GetProperty("temperature"); // pide valor de temp al plugin energy
  std::cout << i << "         " << T << '\n';
 }
 return 0;
}
\end{verbatim}

Para generar el ejecutable,

\control{g++ -o nanodm main.cc -llpmd -ldl -lm}

y listo, tendremos entonces un ejecutable llamado \verb|nanodm| que realizar\'a
una simple corrida de din\'amica molecular.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Calculo de Propiedad est\'atica}

Consideremos que tenemos una celda de simulaci\'on y queremos utiliar las
ventajas de la \textbf{API} para calcular una propiedad, que sabemos existe en
un m\'odulo, por ejemplo \textbf{gdr}. El c\'odigo para el c\'alculo de
\textbf{gdr} de la celda nos quea as\'i,

\begin{verbatim}
 /*
 *
 *
 *
 */

#include <lpmd/api.h>

using namespace lpmd;

int main(int argc, char *argv[])
{
 if (argc < 2) 
 {
  std::cerr << "testgdr <file.xyz>" << '\n';
  exit(1);
 }
 PluginManager pm;
 pm.LoadPlugin("xyz", "file="+std::string(argv[1]));
 pm.LoadPlugin("gdr", "rcut 8.0 bins 300 average true");
 pm.LoadPlugin("nullpotential", "");
 pm.LoadPlugin("linkedcell", "nx 7 ny 7 nz 7 cutoff 8.0");

 CellReader & cread = dynamic_cast<CellReader &>(pm["xyz"]);
 InstantProperty & gdr = dynamic_cast<InstantProperty &>(pm["gdr"]); 
 ScalarTable & gdrvalue = dynamic_cast<ScalarTable &>(pm["gdr"]);
 CellManager & cm = dynamic_cast<CellManager &>(pm["linkedcell"]);
 Potential & dummy = dynamic_cast<Potential &>(pm["nullpotential"]);

 pm["gdr"].Show();

 std::vector<SimulationCell> configs;
 cread.ReadMany(std::string(argv[1]), configs);

 Cell cell(13.16, 13.16, 21.39, M_PI/2, M_PI/2, M_PI*120.0/180.0);
 Vector v1 = cell.GetVector(0);
 v1 = Vector(v1.Get(1), v1.Get(0), v1.Get(2));
 Vector v2 = cell.GetVector(1);
 v2 = Vector(v2.Get(1), v2.Get(0), v2.Get(2));
 cell.SetVector(0, v2);
 cell.SetVector(1, v1);
 for (int i=0;i<3;++i) std::cerr << cell.GetVector(i) << std::endl;

 std::cerr << "Read " << configs.size() << " configurations." << '\n';
 std::cerr << "Configuration 0 has " << configs[0].Size() << " atoms\n";

 for (unsigned long i=0;i<configs.size();++i)
 {
  configs[i].SetCell(cell);
  configs[i].SetCellManager(cm);
  gdr.Evaluate(configs[i], dummy);
  gdrvalue.AddToAverage();
 }

 std::cout << gdrvalue << '\n';

 return 0;
}
\end{verbatim}

Esto, lo compilamos de manera similar al caso anterior, obteniendo un ejecutable
para calcular una propiedad est\'atica, en este caso \verb|gdr| para la celda de
simulaci\'on.
