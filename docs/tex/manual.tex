\documentclass[a4paper,10pt]{scrbook}

\usepackage{graphicx,fancybox,wrapfig}
\usepackage{fullpage}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%NEWCOMMANDS DEFINITIONS%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\lpmd}{\textbf{lpmd }}
\newcommand{\fumfun}[4]{\begin{center}\begin{tabular}{|c|c|c|c|}\hline
 Flag & Work & Test & Mand\\\hline
#1 & #2 & #3 & #4 \\\hline
\end{tabular}
\end{center}}
\newcommand{\D}[2]{\frac{\partial #2}{\partial #1}}
\newcommand{\DD}[2]{\frac{\partial^2 #2}{\partial #1^2}}
\newcommand{\DC}[2]{\frac{D #2}{D #1}} %derivada conectiva.
%\newcommand{\caja}[1]{\begin{center}\fbox{#1}\end{center}}
\newcommand{\cajatx}[1]{\begin{center}\setlength{\fboxsep}{0.2cm}\fbox{\parbox[l]{10cm}{#1}}\end{center}}
%\newcommand{\cvb}[1]{\begin{center}\begin{verbatim} #1 \end{verbatim}\end{center}}
\newcommand{\cajaeq}[1]{\begin{center}\setlength{\fboxsep}{0.1cm}\fbox{\parbox[b]{10cm}{#1}}\end{center}}
\newcommand{\cajafi}[3]{\begin{figure}\centering\shadowbox{\begin{minipage}{3.5 in}\centering\includegraphics[totalheight=2in]{#1}\caption{#2}\label{fig: #3}\end{minipage}}\end{figure}}


\newcommand {\foto}[4]{\begin{figure}
%   \begin{framed}
      \begin{center}
      \includegraphics[scale=#2]{#1}
      \end{center}

      \caption{\emph{#3}}

      \label{#4}
%   \end{framed}
   \end{figure}
   }

\begin{document}
\author{http://www.gnm.cl}
\title{``Las Palmeras'' Molecular Dynamics - \textbf{LPMD}.}
\maketitle

\tableofcontents
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{El Programa}
\label{chap:lpmd}

\section{Origenes.}

El c\'odigo \lpmd comenz\'o a desarrollarse durante junio del a\~no 2007 como una idea de desarrollar e implementar din\'amica molecular de forma modular, tratando de ser lo m\'as amigable para el dise\~no de plugins y de actualizaciones. Los programadores principales de la primera etapa del c\'odigo fueron, Sergio Davis, Claudia Loyola y Joaqu\'in Peralta, todos ellos integrantes del \textit{Grupo de NanoMateriales} \textbf{http://www.gnm.cl}, actualmente existen m\'as colaboradores en le desarollo del c\'odigo (v\'ease \textbf{gente}).

\section{Caracter\'isticas Globales.}

Dentro de las caracter\'isticas principales de \lpmd tenemos principalmente ...

\chapter{Instalaci\'on}
\label{chap:inst}

\lpmd ha sido probado en distintas arquitecturas, y compiladores, hasta ahora podemos \textbf{dar fe} que se ha logrado compilar el c\'odigo fuente en las siguientes arquitecturas.

\begin{itemize}
 \item Linux I686/AMD64
 \item OS/X
 \item Solaris
 \item Inclusive en Windows
\end{itemize}

\section{Descarga}

Para el correcto funcionamiento de \lpmd es necesario instalar previamente una libreria y un set de plugins. Por lo que se requieren descargar 3 paquetes principales. La divisi\'on del c\'odigo en este set de paquetes se debe a la reutilizaci\'on de la \textbf{API} y los \textbf{plugins} para nuevos programas de utilidades o bien para un propio usuario interesado en la programaci\'on.

\subsection{Descarga de versi\'on estable}

La \'ultima versi\'on estable de los paquetes es :

\begin{itemize}
 \item liblpmd : ver. 0.1.0
 \item plugins : ver. 0.5.1
 \item lpmd    : ver. 0.5
\end{itemize}

Los n\'umeros de los plugins indican la compatibilidad con las versiones de \lpmd y de la \textbf{API} liblpmd, de \'esta forma se mantiene un \textbf{orden} segun la version que conocemos.

\subsection{Descarga versi\'on en desarrollo}

Para los interesados en el desarrollo actual de lpmd y sus dependencias principales pueden ser descargadas con:

\begin{center}
 \begin{verbatim}
  svn co svn://www.gnm.cl/lpmd/liblpmd/unstable liblpmd-uns
  svn co svn://www.gnm.cl/lpmd/plugins/unstable plugins-uns
  svn co svn://www.gnm.cl/lpmd/lpmd/unstable lpmd-uns
 \end{verbatim}
\end{center}

\section{Instalaci\'on}
Antes de comenzar con la instalaci\'on de \lpmd es necesario instalar los 2 paquetes previos, \textbf{liblpmd} y \textbf{plugins}, a continuaci\'on se muestra una descripci\'on de como instalar cada uno de los paquetes.

\cajatx{Nota : Los que poseen la versi\'on inestable cuentan con el fichero \textbf{autogen.sh} para poder generar los Makefiles.}
\subsection{Instalando liblpmd}

En primer lugar descomprima el fichero 

\begin{center}
\begin{verbatim}
 tar -xvzf liblpmd-X.X.X.tar.gz
\end{verbatim}
\end{center}

lo que le generar\'a un nuevo directorio, para instalar esta librer\'ia con todos los m\'etodos necesarios para el funcionamiento de \lpmd y la implementaci\'on de plugins ejecute :
\begin{center}
\begin{verbatim}
 ./configure
 make
\end{verbatim}
\end{center}

y como administrador, 

\begin{verbatim}
 make install
\end{verbatim}

Por \textit{default} el directorio de instalaci\'on de la API programa es \verb|/usr/local/|, en caso de requerir una ubicaci\'on distinta revise las opciones con \verb|./configure --help|.

En caso de cualquier error envie un mail a alguno de los desarrolladores principales o en su defecto a \verb|gnm@gnm.cl|.

\subsection{Instalando plugins}

Una de los requerimientos b\'asicos de \lpmd es tener bien configurada la ubicaci\'on de los plugins que \lpmd requiere, es por eso que se debe utilizar la ubicacion de la instalaci\'on de la libreria lpmd \textbf{liblpmd}. Usualmente deber\'ia correrse con:

\begin{verbatim}
 ./configure --with-lpmd=/usr/local
 make
\end{verbatim}

y proceder la instalaci\'on como superusuario:

\begin{verbatim}
 make install
\end{verbatim}

Esto ubicara todos los plugins incluidos en el paquete \verb|plugins| en el directorio \verb|/usr/local/lib/lpmd|. De esta forma ya estamos listos para comenzar la instalaci\'on de lpmd y realizar las primeras pruebas.

\subsection{Instalando lpmd}

Es uno de los paquetes m\'as peque\~nos y rapidos de instalar, para proceder, se hace de manera similar que los anteriores, ejecutando :

\begin{verbatim}
 ./configure 
 make
\end{verbatim}

y proceder a instalar como superusuario:

\begin{verbatim}
 make install
\end{verbatim}

Esto generara un ejecutable \verb|lpmd| en \verb|/usr/local/bin/lpmd|, que puede ser ejecutado desde cualquier sitio (si se presenta algun problema, corriga su \verb|PATH|).

puede correr lpmd con

\begin{verbatim}
username@machine:~$ lpmd
Usage: lpmd [--systemfile <file.sys> | -s <file.sys>] [--version | v]
       lpmd [--help | -h ]
username@machine:~$
\end{verbatim}

Para los detalles de el fichero de sistema revise el cap\'itulo~\ref{chap:input}.

\subsection{Actualizando lpmd}

\lpmd tiene m\'as de una forma de acutualizarse, para eso en primer lugar debemos tener claro que version de la API posee \lpmd ya que las versiones nuevas de \lpmd o de los plugins dependen completamente de la API que tengamos.

Actualmente la API se encuentra en la versi\'on \textbf{1.0.1} esperamos que la pr\'oxima versi\'on soporte MPI para muchas fases de la din\'amica molecular.


\chapter{El fichero de Entrada}
\label{chap:input}

Una de las piezas fundamentales en \lpmd para la corrida de una simulaci\'on molecular son los ficheros iniciales de configuraci\'on del sistema. Para el correcto funcionamiento se necesita un fichero de sistema, este fichero espec\'ifica casi el 100\% de los requerimientos de la simulaci\'on y en ocaciones el 100\%. Aunque en la mayor\'ia de los casos se requiere un fichero adicional en donde se encuentran las posiciones at\'omicas de los \'atomos pertenecientes a la celda de simulaci\'on. Es por eso que en primer lugar revisaremos los arhicovs de posiciones at\'omicas antes de revisar el fichero de sistema.

\section{Fichero Con Posiciones Atomicas}

Actualmente \lpmd soporta dos formatos de ficheros para especificar las posiciones at\'omicas, uno es \textbf{xyz} y el otro \textbf{lpmd}, que son archivos ASCII manejables en cualquier editor.

\cajatx{Sin embargo, la version de prueba 0.4.X presentaba problemas con tabulaciones en un fichero de entrada, por lo que se recomienda evitarlo o bien chequear que la salida entregue las posiciones correctas.}

Veamos a continuaci\'on cada uno de estos formatos.

\subsection{Fichero .xyz}

Es el estandar de ficheros \verb|xyz| utilizado en muchos c\'odigos de simulacion computacional, es un archivo simple que cuenta con la informaci\'on de las posiciones at\'omicas del sistema. La estructura de un fichero es :
\begin{center}
\begin{tabular}{l|l}
 \verb|N| & Especif\'ica el n\'umero de \'atomos en la celda \\
 \verb|comment| & Una l\'inea adicional de comentario, titulo etc. \\
 \verb|Sym X Y Z| & S\'imbolo at\'omico y las posiciones en cordenadas cartesianas. \\
\end{tabular}
\end{center}

\subsection{Fichero .lpmd}

Es un fichero con las posiciones escalas de los \'atomos que forman la celda. el fichero es de tipo ASCCI y su estructura principal esta dada por:

\begin{center}
 \begin{tabular}{l|l}
 \verb|LPMD VERSION X.X | & Especif\'ica la version del fichero \verb|.lpmd| \\
 \verb|cell propoerties | & Propiedades de la celda, pueden ser 3 vectores o largos y angulos. \\
 \verb|Sym sx sy sz| & S\'imbolo at\'omico y las posiciones escalads en cada eje.\\
\end{tabular}

\end{center}


\section{El Fichero de configuraci\'on .control}

Es el fichero principal para realizar la simulaci\'on computacional. Es por eso que en primer lugar se har\'a una descripci\'on general y luego veremos cada uno de los flags principales.

Entre las cosas a considerar en un fichero de sistema, est\'an:

\begin{itemize}
 \item \# Es una linea de comentario.
 \item Evite los \verb|\tab| dentro del c\'odigo (se corregir\'a).
 \item Pese a que puede ser aleatorio el orden de los flaggs, se recomienda un orden.
 \item siempre defina los modulos antes de utilizarlos.
\end{itemize}

\subsection{Celda de Simulaci\'on.}

Son todas las propiedades que describen la celda de simulaci\'on. La mayor\'ia de las opciones del c\'odigo en esta parte estan descripas en \textbf{Propiedades Generales}. Sin embargo hay un par de opciones que siempre deben tenerse en cuenta en la primera l\'inea de nuestro archivo de sistema.

\subsubsection{cell}

El flag cell es utilizado para describir la celda de simulaci\'on y asignar las propiedades de \'esta. Generalmente una celda de simulaci\'on puede venir descrita ya en el formato del fichero de entrada, sin embargo hay formatos, como el \textbf{xyz}, que no poseen la descripci\'on de la celda, es por eso que es necesario utilizar siempre esta opci\'on. Si despues de dar la opci\'on \textbf{cell} se utiliza un formato de entrada descriptivo, como \textbf{lpmd}, \'este \'ultimo es el valor que toma la celda.

\begin{tabular}{ccl}
 a & = & indica el largo de la celda en \textbf{a}.\\
 b & = & indica el largo de la celda en \textbf{b}.\\
 c & = & indica el largo de la celda en \textbf{c}.\\
 alpha & = & indica el \'angulo $\alpha$.\\
 beta & = & indica el \'angulo $\beta$.\\
 gamma & = & indica el \'angulo $\gamma$.\\
\end{tabular}

Formas de uso :

\begin{verbatim}
 cell a=10 b=5 c=5 alpha=45 beta=90 gamma=90
\end{verbatim}

\subsection{Entrada Salida}

\subsubsection{input}
Existen distintas formas de ingresas un fichero de configuraci\'on inicial, el fichero cuenta con las posiciones atomicas de los \'atomos que hay en la simulaci\'on, donde se debe indicar el m\'odulo que indica el tipo de fichero que lo carga. Adem\'as existe la posibilidad de cargar distintos m\'odulos de entrada como generadores de celda.

\begin{tabular}{ccl}
 module & = & indica el m\'odulo para cargar la celda.\\
 file & = & indica el fichero que carga la celda (si se requiere).\\
 level & = & indica el nivel del fichero (si se requiere).\\
\end{tabular}

Formas de uso

\begin{itemize}
 \item Carga desde un fichero XYZ.
\begin{verbatim}
 input module=xyz file=fichero.xyz level=0
\end{verbatim}
 \item Inicializa una celda del tipo fcc
\begin{verbatim}
 input module=fcc a=1 nx=3 ny=3 nz=3
\end{verbatim}
 \item Inicializa con metodo skewstart
\begin{verbatim}
 input module=skewstart atoms=108 symbol=Ar
\end{verbatim}
\end{itemize}

\subsubsection{output}
\subsubsection{restore}

\subsection{Propiedades Generales}
\subsubsection{repeat}
\subsubsection{charge}
\subsubsection{periodic}
\subsubsection{steps}
\subsubsection{distcache}
\subsubsection{dumping}
\subsubsection{monitor}
\subsubsection{temperature}

\subsection{M\'odulos : Propiedades del sistema}
\subsubsection{tempscaling}
\subsubsection{berendsen}

\subsection{M\'odulos : Propiedades de Celda}
\subsubsection{cellscaling}
\subsubsection{crystalfcc}
\subsubsection{crystalsc}
\subsubsection{lpmd}
\subsubsection{xyz}
\subsubsection{skewstart}

\subsection{M\'odulos : Potenciales Interat\'omicos}
\subsubsection{lennardjones}
\subsubsection{fastlj}
\subsubsection{morse}
\subsubsection{constantforce}
\subsubsection{harmonic}
\subsubsection{buckingham}
\subsubsection{nullpairpotential}
\subsubsection{nullpotential}

\subsection{M\'odulos : Integradores}
\subsubsection{beeman}
\subsubsection{euler}
\subsubsection{nullintegrator}
\subsubsection{velocityverlet}
\subsubsection{verlet}

\subsection{M\'odulos : Visualizadores}
\subsubsection{povray}

\subsection{M\'odulos : Propiedades Es\'aticas}
\subsubsection{angdist}
\subsubsection{cordnum}
\subsubsection{cordnumfunc}
\subsubsection{gdr}

\subsection{M\'odulos : Propiedades Din\'amicas}
\subsubsection{vacf}

\section{Ficheros de Salida}

\chapter{Desarrollando M\'odulos}
\label{chap:own}

\section{Idea Principal}

Una de las caracter\'isticas princpales de \lpmd con respecto a otros c\'odigos de Din\'amica Molecular es su gran \textit{modularidad} lo que hace que muchas propiedades de un ciclo recgular de din\'amica molecular sean modificables facilmentes, por ejemplo un cilco de din\'amica molecular consta de muchas \textbf{piezas} constantes, tales como los potenciales, integradores o bien una propiedad que puede ser calculada de forma instantanea o que requiere una correlaci\'on temporal del sistema.

Consideremos por ejemplo :

Se puede observar claramente que existen \textbf{bloques} en donde la caracter\'istica principal de cada uno de ellos en \lpmd es que son modificables por diferentes tipos de \textbf{m\'odulos} que \textit{encajan} perfectamente en estos bloques, estos m\'odulos pueden ser din\'amicos lo que da una ventaja significativa a la hora de desarrollar el c\'odigo necesario para trabajar con \'el.

En este cap\'itulo se exponen las distintas piezas \textbf{modificables} de \lpmd que har\'an de este un c\'odigo mucho m\'as \'util para el desarrollo de distintas investigaciones con una misma herramienta.

\section{Desarrollando un Potencial}

Una de las piezas fundamentales en la din\'amica molecular, es la integraci\'on de un potencial interat\'omico entre las particulas que componen el sistema, es por eso que \lpmd facilita 

\section{Desarrollando una Propiedad}

Durante una simulaci\'on de din\'amica molecular una de las herramientas m\'as utilizadas  son las propiedades f\'isicas del sistema, las que son, een ocaciones, comparables con resultados experimentales provenientes del laboratorio. Sin embargo estas propiedades, no siempre pueden ser evaluadas ya que los programas no cuentan con ellas, o bien deben implementarse para resolver este problema, aprendiendo a tomar configuraciones de salida de otros programas, para nuestros fines.

Para resolver esta situaci\'on \lpmd calcula propiedades de un sistema atomico, de forma modular, es decir cada uno de nosotros puede \textbf{programar} la propidad que necesesita para su evaluacion, instantanea, o en ocaciones temporal.

\lpmd separa las propiedades de una celda de simulaci\'on en 2 tipos :

\begin{itemize}
 \item Propiedades Instantaneas.
 \item Propiedades Temporales.
\end{itemize}

En donde, las instantaneas corresponden a las propiedades que pueden calcularse en un instante de tiempo y no dependen de configuraciones previas del sistema (como funci\'on de distribuci\'on de pares), en cambio las temporales son aquellas que dependen de configuraciones previas del sistema, por ejemplo la funci\'on de autocorrelaci\'on de velocidades.

A continuaci\'on se mostrar\'a la estructura b\'asica necesaria para implementar propiedades instantaneas y temporales en el programa \lpmd y as\'i utilizarlas durante la ejecuci\'on de \lpmd o bien para trabajar con nuevas utilidades.

\subsection{Instant\'anea}

Las propiedades m\'as simples para comenzar a implementar son las instantaneas, dentro de este tipo de propiedades tenemos aquellas que retornan por valor un solo n\'umero real (energ\'ia, temperatura, etc.) y otras que retornan una matriz de numeros reales (como g(r) o distribuci\'on angular, etc.), para esto es necesario ubicarse dentro del directorio \verb|lib| de \lpmd y generar dos nuevos archivos que constan con informacion b\'asica de la propiedad.

Consideremos por ejemplo la funci\'on de distribuci\'on de pares (\verb|g(r)|) (\textbf{nota : esto ya existe en el directorio, ac\'a se muestra a modo de ejemplo.}), para ello generamos dos nuevos ficheros dentro de \verb|lib| :

\begin{center}
 \verb|touch gdr.cc gdr.h|
\end{center}



\subsection{Temporal}

\section{Desarrollando Integrador}

\section{Desarrollando Utilidades}

\chapter{Ejemplos.}
\label{chap:exa}

\section{Ejemplos B\'asicos}

\subsection{Dimero 1D}

\subsection{Mallas 2D}

\subsection{Sistemas Cristalinos 3D}

\subsection{Ejemplos m\'as Complejos}

\chapter{Paralelizaci\'on}

\chapter{Gente}
\label{chap:auth}

Desarrollador principal \textbf{Sergio Davis} en colaboraci\'on con \textbf{Joaqu\'in Peralta} y \textbf{Claudia Loyola}, sin embargo el objetivo de lpmd es lograr atraer la atenci\'on de la gente y motivar a que sean colaboradores activos en el desarrollo del proyecto, ya sea desarrollando plugins o bien realizando sugerencias, que con mucho gusto ser\'an acogidas.

Programadores Principales:

\begin{itemize}
 \item Sergio Davis, KTH
 \item Claudia Loyola, UCHILE
 \item Joaqu\'in Peralta, UCHILE
\end{itemize}


Programadores Adicionales:

\begin{itemize}
 \item Nicolas Viaux, UCHILE
 \item Nicolas Perez, UCHILE
 \item NN, UCHILE
 \item 
\end{itemize}


Colaboradores :

\begin{itemize}
 \item Gonzalo Gutierrez
 \item Eduardo Menendez
\end{itemize}


\begin{itemize}
 \item ... : ...
\end{itemize}


\end{document}
